<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mini Pacman ‚Ä¢ Por Soamy Lanza</title>

<style>
:root{
  --bg:#0b0f14;
  --card:#121826;
  --line:#233049;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --shadow:0 14px 40px rgba(0,0,0,.45);
  --radius:18px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,Segoe UI,Roboto,Arial;
  background:radial-gradient(900px 500px at 20% 10%, rgba(34,197,94,.14), transparent 55%),
             radial-gradient(800px 500px at 80% 15%, rgba(245,158,11,.12), transparent 55%),
             var(--bg);
  color:var(--text);
  overflow:hidden;
}

.app{
  height:100svh;
  max-width:1100px;
  margin:0 auto;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

header{
  background:rgba(18,24,38,.92);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  display:flex;
  flex-wrap:wrap;
  justify-content:space-between;
  gap:10px;
}

.title h1{margin:0;font-size:18px}
.title small{color:var(--muted)}
.byline{font-size:12px;color:var(--muted)}

.stats{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.pill{
  border:1px solid var(--line);
  border-radius:999px;
  padding:6px 10px;
  background:rgba(11,15,20,.35);
  font-size:13px;
}

main{flex:1;min-height:0}
.panel{
  background:rgba(18,24,38,.92);
  border:1px solid var(--line);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  height:100%;
}

.controls{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:space-between;
}
select,button{
  border-radius:12px;
  border:1px solid var(--line);
  background:rgba(11,15,20,.35);
  color:var(--text);
  padding:10px 14px;
  font-size:14px;
}
button.primary{background:rgba(34,197,94,.18)}
button.warn{background:rgba(245,158,11,.18)}

.hint{font-size:13px;color:var(--muted)}

.gameWrap{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
}

canvas{
  width:min(92vw,520px);
  height:min(92vw,520px);
  background:#000;
  border-radius:16px;
  border:1px solid var(--line);
}

.touchPad{
  display:none;
  justify-content:center;
  gap:16px;
  margin-top:10px;
}

.touchPad button{
  width:80px;
  height:80px;
  font-size:30px;
  border-radius:24px;
}

/* üî• Flechas GRANDES en celular */
@media(max-width:700px){
  .touchPad{display:flex}
}

.footer{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="app">

<header>
  <div class="title">
    <h1>üëæ Mini Pacman</h1>
    <small>Come puntos ‚Ä¢ eres seguido por fantasmas</small>
    <div class="byline">Por: <b>Soamy Lanza</b></div>
  </div>
  <div class="stats">
    <div class="pill">‚è±Ô∏è <span id="time">00:00.0</span></div>
    <div class="pill">‚≠ê <span id="score">0</span></div>
    <div class="pill">‚ù§Ô∏è <span id="lives">3</span></div>
    <div class="pill">üéöÔ∏è <span id="difficultyLabel">Medio</span></div>
  </div>
</header>

<main>
<section class="panel">

<div class="controls">
  <div>
    <select id="difficulty">
      <option value="easy">Bajo</option>
      <option value="medium" selected>Medio</option>
      <option value="hard">Alto</option>
    </select>
    <button class="primary" id="newGame">Nuevo</button>
    <button class="warn" id="resetGame">Reiniciar</button>
  </div>
  <button id="share">Compartir</button>
</div>

<div class="hint">
PC: <b>WASD</b> o <b>flechas</b> ¬∑ M√≥vil: botones grandes abajo ¬∑
<b>Los fantasmas te persiguen</b>, ¬°no te dejes atrapar!
</div>

<div class="gameWrap">
  <canvas id="game" width="560" height="560"></canvas>
</div>

<div class="touchPad">
  <button onclick="setDir(0,-1)">‚¨ÜÔ∏è</button>
  <button onclick="setDir(-1,0)">‚¨ÖÔ∏è</button>
  <button onclick="setDir(0,1)">‚¨áÔ∏è</button>
  <button onclick="setDir(1,0)">‚û°Ô∏è</button>
</div>

<div class="footer">
  <span>En juego</span>
  <span>Una sola pantalla ¬∑ comparte por WhatsApp</span>
</div>

</section>
</main>
</div>

<script>
/* ===== MINI PACMAN SIMPLE ===== */
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const tile=20, cols=28, rows=28;
canvas.width=cols*tile;
canvas.height=rows*tile;

let score=0,lives=3;
let dir={x:1,y:0},nextDir={x:1,y:0};
let pac={x:1,y:1};
let ghosts=[];
let running=true;

const diffConfig={
  easy:{ghosts:2,speed:0.05},
  medium:{ghosts:3,speed:0.08},
  hard:{ghosts:4,speed:0.12}
};

let diff="medium";

function setDir(x,y){nextDir={x,y}}

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowUp"||e.key==="w")setDir(0,-1);
  if(e.key==="ArrowDown"||e.key==="s")setDir(0,1);
  if(e.key==="ArrowLeft"||e.key==="a")setDir(-1,0);
  if(e.key==="ArrowRight"||e.key==="d")setDir(1,0);
});

function resetGame(){
  score=0;lives=3;
  pac={x:1,y:1};
  ghosts=[];
  for(let i=0;i<diffConfig[diff].ghosts;i++){
    ghosts.push({x:14+i,y:14});
  }
}

function update(){
  pac.x+=nextDir.x;
  pac.y+=nextDir.y;
  pac.x=(pac.x+cols)%cols;
  pac.y=(pac.y+rows)%rows;

  ghosts.forEach(g=>{
    g.x+=Math.sign(pac.x-g.x);
    g.y+=Math.sign(pac.y-g.y);
    if(g.x===pac.x&&g.y===pac.y){
      lives--;
      pac={x:1,y:1};
    }
  });
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="yellow";
  ctx.beginPath();
  ctx.arc(pac.x*tile+tile/2,pac.y*tile+tile/2,8,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="red";
  ghosts.forEach(g=>{
    ctx.fillRect(g.x*tile+4,g.y*tile+4,12,12);
  });
}

function loop(){
  if(!running)return;
  update();
  draw();
  requestAnimationFrame(loop);
}

document.getElementById("newGame").onclick=()=>{diff=document.getElementById("difficulty").value;resetGame()}
document.getElementById("resetGame").onclick=resetGame;

document.getElementById("share").onclick=()=>{
  const url=location.href;
  if(navigator.share){
    navigator.share({title:"Mini Pacman",text:"Mini Pacman ‚Äì Por Soamy Lanza",url});
  }else{
    navigator.clipboard.writeText(url);
    alert("Link copiado ‚úÖ");
  }
};

resetGame();
loop();
</script>
</body>
</html>
